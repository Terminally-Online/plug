//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table FarcasterUserAddress {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  farcasterUsers FarcasterUser [not null]
}

Table FarcasterUser {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  identity SocketIdentity
  addresses FarcasterUserAddress [not null]
  followers FarcasterUser [not null]
  following FarcasterUser [not null]
}

Table ENS {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  avatar String
  identity SocketIdentity [not null]
  socketId String [pk]
}

Table Companion {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  lastFeedAt DateTime
  name String [not null]
  feedCount Int [not null, default: 0]
  treatsFed Int [not null, default: 0]
  streak Int [not null, default: 0]
  identity SocketIdentity [not null]
  socketId String [pk]
}

Table SocketIdentity {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  socket UserSocket [not null]
  socketId String [pk]
  farcaster FarcasterUser
  farcasterId String [unique]
  ens ENS
  companion Companion
}

Table UserSocket {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  admin Boolean [not null, default: false]
  socketAddress String [not null]
  identity SocketIdentity
  workflow Workflow [not null]
  collectibles OpenseaCollectibleCache [not null]
  balances ImplementationBalance [not null]
  positions PositionCache [not null]
  CollectibleCache CollectibleCache [not null]
}

Table Workflow {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null, default: 'Untitled Plug']
  isCurated Boolean [not null, default: false]
  isPrivate Boolean [not null, default: false]
  actions String [not null, default: '[]']
  color String [not null]
  tags String[] [not null]
  workflowForkedId String
  socket UserSocket [not null]
  socketId String [not null]
}

Table TokenPrice {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  chain String [not null]
  address String [not null]
  price Float [not null, default: 0]
  change Float [not null, default: 0]
  decimals Int
  symbol String
  timestamp Int
  confidence Float
}

Table Protocol {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [pk]
  icon String [not null]
  url String [not null]
  positions Position [not null]
}

Table ImplementationBalance {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  balance Float [not null]
  implementation Implementation [not null]
  implementationChain String [not null]
  implementationContract String [not null]
  socket UserSocket [not null]
  socketId String [not null]

  indexes {
    (socketId, implementationChain, implementationContract) [pk]
  }
}

Table Implementation {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  chain String [not null]
  contract String [not null]
  decimals Int [not null]
  fungible Fungible [not null]
  fungibleName String [not null]
  fungibleSymbol String [not null]
  balances ImplementationBalance [not null]

  indexes {
    (chain, contract) [pk]
  }
}

Table Fungible {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  symbol String [not null]
  icon String
  verified Boolean [not null]
  implementations Implementation [not null]
  positions Position [not null]

  indexes {
    (name, symbol) [pk]
  }
}

Table Position {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  chain String [not null]
  type String [not null]
  balance Float
  fungible Fungible [not null]
  fungibleName String [not null]
  fungibleSymbol String [not null]
  protocol Protocol
  protocolName String
  cache PositionCache [not null]
  cacheId String [not null]
}

Table PositionCache {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  positions Position [not null]
  socket UserSocket [not null]
  socketId String [pk]
}

Table OpenseaCollection {
  address String [not null]
  slug String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  collection String [not null]
  name String [not null]
  description String [not null]
  imageUrl String [not null]
  bannerImageUrl String [not null]
  owner String [not null]
  category String [not null]
  isDisabled Boolean [not null]
  isNsfw Boolean [not null]
  traitOffersEnabled Boolean [not null]
  collectionOffersEnabled Boolean [not null]
  totalSupply Int [not null]
  chain String [not null]
  collectibles OpenseaCollectible [not null]

  indexes {
    (address, chain) [pk]
  }
}

Table OpenseaCollectibleMetadata {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  traits Json[] [not null]
  color String
  collectible OpenseaCollectible [not null]
  collectibleId String [unique, not null]
}

Table OpenseaCollectible {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  identifier String [not null]
  contract String [not null]
  tokenStandard String [not null]
  name String
  description String
  imageUrl String
  displayImageUrl String
  displayAnimationUrl String
  metadataUrl String
  openseaUrl String [not null]
  isDisabled Boolean [not null]
  isNsfw Boolean [not null]
  owner String [not null]
  metadata OpenseaCollectibleMetadata
  collection OpenseaCollection [not null]
  cache OpenseaCollectibleCache [not null]
  cacheSocketId String [not null]
  cacheChain String [not null]
}

Table OpenseaCollectibleCache {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  chain String [not null]
  collectibles OpenseaCollectible [not null]
  socket UserSocket [not null]
  socketId String [not null]

  indexes {
    (socketId, chain) [pk]
  }
}

Table Collection {
  address String [not null]
  chain String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  description String [not null]
  iconUrl String
  openseaUrl String
  projectUrl String
  wikiUrl String
  discordUrl String
  telegramUrl String
  twitterUsername String
  instagramUsername String
  collectibles Collectible [not null]

  indexes {
    (address, chain) [pk]
  }
}

Table CollectibleMetadata {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  tokenId String [not null]
  collectionAddress String [not null]
  collectionChain String [not null]
  traits Json[] [not null]
  color String

  indexes {
    (tokenId, collectionAddress, collectionChain) [pk]
  }
}

Table Collectible {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  tokenId String [not null]
  amount String [not null]
  name String [not null]
  interface String [not null]
  previewUrl String
  imageUrl String
  videoUrl String
  isSpam Boolean [not null]
  collection Collection [not null]
  collectionAddress String [not null]
  collectionChain String [not null]
  cache CollectibleCache [not null]
  cacheSocketId String [not null]

  indexes {
    (cacheSocketId, tokenId, collectionAddress, collectionChain) [pk]
  }
}

Table CollectibleCache {
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  collectibles Collectible [not null]
  socket UserSocket [not null]
  socketId String [pk]
}

Table FeatureRequest {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  userAddress String [not null]
  context String [not null]
  message String
}

Table FarcasterAddresses {
  farcasterusersId String [ref: > FarcasterUser.id]
  addressesId String [ref: > FarcasterUserAddress.id]
}

Table FarcasterFollows {
  followersId String [ref: > FarcasterUser.id]
  followingId String [ref: > FarcasterUser.id]
}

Ref: ENS.socketId - SocketIdentity.socketId [delete: Cascade]

Ref: Companion.socketId - SocketIdentity.socketId [delete: Cascade]

Ref: SocketIdentity.socketId - UserSocket.id [delete: Cascade]

Ref: SocketIdentity.farcasterId - FarcasterUser.id [delete: Set Null]

Ref: Workflow.socketId > UserSocket.id

Ref: ImplementationBalance.(implementationChain, implementationContract) > Implementation.(chain, contract)

Ref: ImplementationBalance.socketId > UserSocket.id

Ref: Implementation.(fungibleName, fungibleSymbol) > Fungible.(name, symbol) [delete: Cascade]

Ref: Position.(fungibleName, fungibleSymbol) > Fungible.(name, symbol) [delete: Cascade]

Ref: Position.protocolName > Protocol.name [delete: Cascade]

Ref: Position.cacheId > PositionCache.socketId [delete: Cascade]

Ref: PositionCache.socketId > UserSocket.id [delete: Cascade]

Ref: OpenseaCollectibleMetadata.collectibleId - OpenseaCollectible.id [delete: Cascade]

Ref: OpenseaCollectible.(contract, cacheChain) > OpenseaCollection.(address, chain)

Ref: OpenseaCollectible.(cacheSocketId, cacheChain) > OpenseaCollectibleCache.(socketId, chain) [delete: Cascade]

Ref: OpenseaCollectibleCache.socketId > UserSocket.id [delete: Cascade]

Ref: Collectible.(collectionAddress, collectionChain) > Collection.(address, chain)

Ref: Collectible.cacheSocketId > CollectibleCache.socketId

Ref: CollectibleCache.socketId > UserSocket.id [delete: Cascade]