import { useState } from "react"

import { motion, useAnimationFrame } from "framer-motion"
import { HandCoins } from "lucide-react"

import { Counter, InfoCard } from "@/components"

export const ActionBorrow = () => {
	const [percentage, setPercentage] = useState(25)

	const widthValues = [80, 90, 50, 70, 80, 90, 40, 20]
	const animationDuration = 12000

	useAnimationFrame(time => {
		const progress = (time % animationDuration) / animationDuration
		const index = Math.floor(progress * widthValues.length)
		const currentWidth = widthValues[index]
		setPercentage(currentWidth)
	})
	return (
		<InfoCard
			icon={<HandCoins size={24} className="opacity-40" />}
			text="Borrow & Lend."
			description="Realize the full value of your onchain assets by supplying and borrowing with decentralized lending markets."
			className="relative z-[99999] col-span-2 h-[320px] sm:h-[320px] 2xl:h-[300px]"
		>
			<div className="absolute inset-0 flex flex-row">
				<motion.p
					className="absolute top-2 z-[9999] ml-[28px] h-8 -translate-x-1/2 border-l-[2px] border-plug-green pb-4 font-bold"
					animate={{
						left: ["80%", "90%", "50%", "70%", "80%", "90%", "40%", "20%"]
					}}
					transition={{
						duration: 12,
						repeat: Infinity,
						repeatType: "reverse",
						ease: "easeInOut"
					}}
				>
					<span className="flex flex-row items-center pl-4">
						<Counter count={Math.round(percentage)} />%
					</span>
				</motion.p>

				<motion.div
					className="relative mt-[6%] flex h-28 items-center justify-center bg-plug-yellow"
					animate={{
						width: ["80%", "90%", "50%", "70%", "80%", "90%", "40%", "20%"]
					}}
					transition={{
						duration: 12,
						repeat: Infinity,
						repeatType: "reverse",
						ease: "easeInOut"
					}}
				>
					<p className="text-2xl font-black text-plug-green opacity-40">PROFIT</p>
				</motion.div>
				<motion.div
					className="relative mt-[6%] flex h-28 w-1/2 items-center justify-center bg-plug-red"
					animate={{
						width: ["20%", "10%", "50%", "30%", "20%", "10%", "60%", "80%"]
					}}
					transition={{
						duration: 12,
						repeat: Infinity,
						repeatType: "reverse",
						ease: "easeInOut"
					}}
				>
					<p className="text-2xl font-black text-white opacity-40">RISK</p>
				</motion.div>

				<svg
					width="100%"
					height="100%"
					viewBox="0 0 5285 1109"
					fill="none"
					className="absolute left-0 right-0 z-[999] mt-[4%] h-32"
				>
					<path
						fill-rule="evenodd"
						clip-rule="evenodd"
						d="M5285 0H0V1109H5285V0ZM88.3945 217.615C88.3945 151.434 142.045 97.7843 208.225 97.7843C274.406 97.7843 328.056 151.434 328.056 217.615V890.196C328.056 956.376 274.406 1010.03 208.225 1010.03C142.045 1010.03 88.3945 956.376 88.3945 890.196V217.615ZM374.742 217.615C374.742 151.434 428.392 97.7843 494.573 97.7843C560.754 97.7843 614.404 151.434 614.404 217.615V890.196C614.404 956.376 560.754 1010.03 494.573 1010.03C428.392 1010.03 374.742 956.376 374.742 890.196V217.615ZM780.924 97.7843C714.744 97.7843 661.094 151.434 661.094 217.615V890.196C661.094 956.376 714.744 1010.03 780.924 1010.03C847.105 1010.03 900.755 956.376 900.755 890.196V217.615C900.755 151.434 847.105 97.7843 780.924 97.7843ZM947.441 217.615C947.441 151.434 1001.09 97.7843 1067.27 97.7843C1133.45 97.7843 1187.1 151.434 1187.1 217.615V890.196C1187.1 956.376 1133.45 1010.03 1067.27 1010.03C1001.09 1010.03 947.441 956.376 947.441 890.196V217.615ZM1353.62 97.7843C1287.44 97.7843 1233.79 151.434 1233.79 217.615V890.196C1233.79 956.376 1287.44 1010.03 1353.62 1010.03C1419.8 1010.03 1473.45 956.376 1473.45 890.196V217.615C1473.45 151.434 1419.8 97.7843 1353.62 97.7843ZM1520.14 217.615C1520.14 151.434 1573.79 97.7843 1639.97 97.7843C1706.15 97.7843 1759.8 151.434 1759.8 217.615V890.196C1759.8 956.376 1706.15 1010.03 1639.97 1010.03C1573.79 1010.03 1520.14 956.376 1520.14 890.196V217.615ZM1926.32 97.7843C1860.14 97.7843 1806.49 151.434 1806.49 217.615V890.196C1806.49 956.376 1860.14 1010.03 1926.32 1010.03C1992.5 1010.03 2046.15 956.376 2046.15 890.196V217.615C2046.15 151.434 1992.5 97.7843 1926.32 97.7843ZM2092.84 217.615C2092.84 151.434 2146.49 97.7843 2212.67 97.7843C2278.85 97.7843 2332.5 151.434 2332.5 217.615V890.196C2332.5 956.376 2278.85 1010.03 2212.67 1010.03C2146.49 1010.03 2092.84 956.376 2092.84 890.196V217.615ZM2499.01 97.7843C2432.83 97.7843 2379.18 151.434 2379.18 217.615V890.196C2379.18 956.376 2432.83 1010.03 2499.01 1010.03C2565.19 1010.03 2618.84 956.376 2618.84 890.196V217.615C2618.84 151.434 2565.19 97.7843 2499.01 97.7843ZM2665.53 217.615C2665.53 151.434 2719.18 97.7843 2785.36 97.7843C2851.54 97.7843 2905.19 151.434 2905.19 217.615V890.196C2905.19 956.376 2851.54 1010.03 2785.36 1010.03C2719.18 1010.03 2665.53 956.376 2665.53 890.196V217.615ZM3071.71 97.7843C3005.53 97.7843 2951.88 151.434 2951.88 217.615V890.196C2951.88 956.376 3005.53 1010.03 3071.71 1010.03C3137.89 1010.03 3191.54 956.376 3191.54 890.196V217.615C3191.54 151.434 3137.89 97.7843 3071.71 97.7843ZM3238.23 217.615C3238.23 151.434 3291.88 97.7843 3358.06 97.7843C3424.24 97.7843 3477.89 151.434 3477.89 217.615V890.196C3477.89 956.376 3424.24 1010.03 3358.06 1010.03C3291.88 1010.03 3238.23 956.376 3238.23 890.196V217.615ZM3644.41 97.7843C3578.23 97.7843 3524.58 151.434 3524.58 217.615V890.196C3524.58 956.376 3578.23 1010.03 3644.41 1010.03C3710.59 1010.03 3764.24 956.376 3764.24 890.196V217.615C3764.24 151.434 3710.59 97.7843 3644.41 97.7843ZM3810.93 217.615C3810.93 151.434 3864.58 97.7843 3930.76 97.7843C3996.94 97.7843 4050.59 151.434 4050.59 217.615V890.196C4050.59 956.376 3996.94 1010.03 3930.76 1010.03C3864.58 1010.03 3810.93 956.376 3810.93 890.196V217.615ZM4217.11 97.7843C4150.93 97.7843 4097.28 151.434 4097.28 217.615V890.196C4097.28 956.376 4150.93 1010.03 4217.11 1010.03C4283.29 1010.03 4336.94 956.376 4336.94 890.196V217.615C4336.94 151.434 4283.29 97.7843 4217.11 97.7843ZM4383.62 217.615C4383.62 151.434 4437.27 97.7843 4503.46 97.7843C4569.64 97.7843 4623.29 151.434 4623.29 217.615V890.196C4623.29 956.376 4569.64 1010.03 4503.46 1010.03C4437.27 1010.03 4383.62 956.376 4383.62 890.196V217.615ZM4789.8 97.7843C4723.62 97.7843 4669.97 151.434 4669.97 217.615V890.196C4669.97 956.376 4723.62 1010.03 4789.8 1010.03C4855.98 1010.03 4909.63 956.376 4909.63 890.196V217.615C4909.63 151.434 4855.98 97.7843 4789.8 97.7843ZM4956.32 217.615C4956.32 151.434 5009.97 97.7843 5076.15 97.7843C5142.33 97.7843 5195.98 151.434 5195.98 217.615V890.196C5195.98 956.376 5142.33 1010.03 5076.15 1010.03C5009.97 1010.03 4956.32 956.376 4956.32 890.196V217.615Z"
						fill="#FEFFF8"
					/>
				</svg>
			</div>

			<div className="absolute bottom-[50%] left-0 right-0 top-0 bg-gradient-to-b from-plug-white/0 to-plug-white" />
			<div className="absolute bottom-0 left-0 right-0 top-[50%] bg-plug-white" />
		</InfoCard>
	)
}
