// SPDX-License-Identifier: MIT

pragma solidity ^0.8.26;

import { PlugLib } from "../libraries/Plug.Lib.sol";

import { PlugFactory } from "../base/Plug.Factory.sol";
import { PlugRewards } from "../base/Plug.Rewards.sol";
import { PlugSocket } from "../base/Plug.Socket.sol";
import { PlugTicket } from "../base/Plug.Ticket.sol";
import { PlugToken } from "../base/Plug.Token.sol";
import { Plug } from "../base/Plug.sol";

interface ImmutableCreate2Factory {
    function safeCreate2(
        bytes32 salt,
        bytes calldata initCode
    )
        external
        payable
        returns (address deploymentAddress);

    function findCreate2Address(
        bytes32 salt,
        bytes calldata initCode
    )
        external
        view
        returns (address deploymentAddress);

    function findCreate2AddressViaHash(
        bytes32 salt,
        bytes32 initCodeHash
    )
        external
        view
        returns (address deploymentAddress);
}

/**
 * @title Plug Etcher
 * @notice This contract is the basis of the automatically generated Plug Etcher
 *         contract used to deploy and write the proper addresses. If you need to add
 *         a new etch into the vm stack for testing, you will do so through the file
 *         found at: /lib/functions/etcher.ts
 * @notice A good portion of this model comes from:
 *         https://github.com/Vectorized/multicaller/blob/main/src/MulticallerEtcher.sol
 *         I am not a Foundry expert. If there is a better way to do this, please let me
 *         know because this is a lot of work just to get a contract deployed when you're
 *         doing anything more than a simple in-and-out contract.
 * @author vectorized (twitter:@optimizoor)
 */
library PlugEtcherLib {
    /// @notice The immutable Create2 factory used for deployment.
    ImmutableCreate2Factory internal constant FACTORY =
        ImmutableCreate2Factory(0x0000000000FFe8B47B3e2130213B802212439497);

    bytes internal constant PLUG_FACTORY_INITCODE =
        hex"60808060405234601557610610908161001b8239f35b600080fdfe608080604052600436101561001357600080fd5b600090813560e01c908162774360146101735750806375fd9f281461012e57637ac4ed641461004157600080fd5b3461012b5760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261012b576020906100f161007e61056b565b90604051917fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f36060527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e2076604052616009602052601e5268603d3d8160223d3973600a52605f602120916040526000606052565b60ff82536035523060601b600152602435601552605581209060355273ffffffffffffffffffffffffffffffffffffffff60405191168152f35b80fd5b503461012b5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261012b57602061016b61007e61056b565b604051908152f35b905060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610567576004359067ffffffffffffffff8211610468573660238301121561046857816004013567ffffffffffffffff811161056357366024828501011161056357608011610507575060448101359073ffffffffffffffffffffffffffffffffffffffff821673ffffffffffffffffffffffffffffffffffffffff60848301351691821580156104ff575b6104cf576040517fffffffffffffffffffffffffffffffffffffffff00000000000000000000000060208201957fffffffffffffffffffffffff0000000000000000000000000000000000000000602485013560a01b16875260601b16602c82015260208152610298604082610593565b519351936020811061049b575b5084926040517fcc3735a920a3ca505d382bbc545af43d6000803e6038573d6000fd5b3d6000f36060527f5155f3363d3d373d3d363d7f360894a13ba1a3210667c828492db98dca3e207660405261600960205281601e5268603d3d8160223d3973600a52605f60212060358201523060581b815260ff81538560158201526055812094341590863b1561047e57506001906104795787388180348a5af11561046c575b816040528760605215958661037f575b604080518815815273ffffffffffffffffffffffffffffffffffffffff88166020820152f35b917f32c7564be3bbeabe66360c08d019367b0d744fcb948046d92552c00c9743dd106020838a9695889552a373ffffffffffffffffffffffffffffffffffffffff8416803b15610468576064938360449273ffffffffffffffffffffffffffffffffffffffff60405197889687957f485cc955000000000000000000000000000000000000000000000000000000008752600487015201351660248401525af1801561045d579373ffffffffffffffffffffffffffffffffffffffff929160409561044d575b829381610359565b8161045791610593565b38610445565b6040513d86823e3d90fd5b8280fd5b63b12d13eb88526004601cfd5b610349565b95505085605f602134f5948561034957633011642588526004601cfd5b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9060209592950360031b1b1692386102a5565b60448583857f54f044c4000000000000000000000000000000000000000000000000000000008352600452602452fd5b508115610227565b807f08c379a0000000000000000000000000000000000000000000000000000000006064925260206004820152601760248201527f506c7567436f72653a73616c742d6d616c666f726d65640000000000000000006044820152fd5b8380fd5b5080fd5b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361058e57565b600080fd5b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176105d457604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea164736f6c634300081a000a";

    bytes32 internal constant PLUG_FACTORY_SALT =
        0x0000000000000000000000000000000000000000294ddd2155ae3c3bb965a992;

    address internal constant PLUG_FACTORY_ADDRESS = 0x00000000E8d0C003F601472E5d94FA7bCCdD5EC2;

    bytes internal constant PLUG_REWARDS_INITCODE =
        hex"60a0604052346066576001638b78c6d81955600160007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a3604051610c39908161006c823960805181818161024a0152818161046a015281816105f0015261079b0152f35b600080fdfe608080604052600436101561001357600080fd5b60003560e01c90816306040618146109385750806325692962146108ec57806348949b13146108c057806353fb6c5c1461086557806354d1f13d1461081d5780635bfcf06f146107c75780635e42b45514610782578063715018a614610736578063727a7c5a1461070a5780638129fc1c146106a05780638da5cb5b1461066857806393707a19146105cc5780639821f5f2146102fc578063f04e283e146102ac578063f2fde38b1461026e578063f7c618c11461021d578063fd132c031461011d5763fee81cf4146100e557600080fd5b34610118576020600319360112610118576100fe610976565b63389a75e1600c52600052602080600c2054604051908152f35b600080fd5b346101185760406003193601126101185760243560043561013c610bc3565b81156101f3576003547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146101c4577f76746d3d3a5b8b377cd4d236e891b5373aa23ce26b99e78116382737fd3a6be291600160409201938460035584600052600060205281836000205584600052600160205280836000205582519182526020820152a2005b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f1f2a20050000000000000000000000000000000000000000000000000000000060005260046000fd5b3461011857600060031936011261011857602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b602060031936011261011857610282610976565b61028a610bc3565b8060601b1561029e5761029c90610be0565b005b637448fbae6000526004601cfd5b6020600319360112610118576102c0610976565b6102c8610bc3565b63389a75e1600c52806000526020600c2090815442116102ee57600061029c9255610be0565b636f5e88186000526004601cfd5b346101185760606003193601126101185760243560043560443567ffffffffffffffff811161011857610333903690600401610999565b826000526002602052604060002073ffffffffffffffffffffffffffffffffffffffff331660005260205260ff604060002054166105a25782600052600060205260406000205480156105785761040561040a9360405160208101906103fa816103ce8b338690917fffffffffffffffffffffffffffffffffffffffff00000000000000000000000060349360601b16825260148201520190565b037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe081018352826109ca565b519020933691610a3a565b610b48565b1561054e57806000526002602052604060002073ffffffffffffffffffffffffffffffffffffffff3316600052602052604060002060017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff008254161790557f0000000000000000000000000000000000000000000000000000000000000000826104943083610b94565b106105245733601452826034526fa9059cbb000000000000000000000000600052602060006044601082855af190816001600051141615610505575b505060006034526040519182527f24b5efa61dd1cfc659205a97fb8ed868f3cb8c81922bab2b96423e5de1de2cb760203393a3005b3b153d1710156105165782806104d0565b6390b8ec186000526004601cfd5b7ff16eeebd0000000000000000000000000000000000000000000000000000000060005260046000fd5b7fb05e92fa0000000000000000000000000000000000000000000000000000000060005260046000fd5b7f7436921e0000000000000000000000000000000000000000000000000000000060005260046000fd5b7faa6a15b50000000000000000000000000000000000000000000000000000000060005260046000fd5b34610118576020600319360112610118576004356105e8610bc3565b80156101f3577f000000000000000000000000000000000000000000000000000000000000000090606052306040523360601b602c526f23b872dd000000000000000000000000600c52602060006064601c82855af19081600160005114161561064e57005b3b153d17101561065a57005b637939f4246000526004601cfd5b34610118576000600319360112610118576020638b78c6d8195473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b346101185760006003193601126101185773096e3b79b5d861c527f148bd02614d4fc917ac17638b78c6d8195573096e3b79b5d861c527f148bd02614d4fc917ac1760007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a3005b346101185760206003193601126101185760043560005260006020526020604060002054604051908152f35b60006003193601126101185761074a610bc3565b6000638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a36000638b78c6d81955005b346101185760006003193601126101185760206107bf307f0000000000000000000000000000000000000000000000000000000000000000610b94565b604051908152f35b34610118576080600319360112610118576107e0610953565b60643567ffffffffffffffff811161011857602091610806610813923690600401610999565b9160443590600435610a90565b6040519015158152f35b60006003193601126101185763389a75e1600c523360005260006020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c92600080a2005b346101185760406003193601126101185761087e610953565b600435600052600260205273ffffffffffffffffffffffffffffffffffffffff60406000209116600052602052602060ff604060002054166040519015158152f35b346101185760206003193601126101185760043560005260016020526020604060002054604051908152f35b60006003193601126101185763389a75e1600c52336000526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d600080a2005b34610118576000600319360112610118576020906003548152f35b6024359073ffffffffffffffffffffffffffffffffffffffff8216820361011857565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361011857565b9181601f840112156101185782359167ffffffffffffffff8311610118576020808501948460051b01011161011857565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff821117610a0b57604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b9291909267ffffffffffffffff8411610a0b578360051b906020604051610a63828501826109ca565b809681520191810192831161011857905b828210610a8057505050565b8135815260209182019101610a74565b91909392826000526000602052604060002054928315610b3d576000526002602052604060002073ffffffffffffffffffffffffffffffffffffffff861660005260205260ff60406000205416610b3357610b30946103ce6103fa6104059460405192839160208301958690917fffffffffffffffffffffffffffffffffffffffff00000000000000000000000060349360601b16825260148201520190565b90565b5050505050600090565b505050505050600090565b909181519182610b5a575b5090501490565b8060208092019360051b0101905b8251811160051b9081526020835191185260206040600020920191818310610b68579150508038610b53565b602460106020939284936014526f70a082310000000000000000000000006000525afa601f3d11166020510290565b638b78c6d819543303610bd257565b6382b429006000526004601cfd5b73ffffffffffffffffffffffffffffffffffffffff1680638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3638b78c6d8195556fea164736f6c634300081a000a";

    bytes32 internal constant PLUG_REWARDS_SALT =
        0x0000000000000000000000000000000000000000c1e4d626933d5200cd28f0a1;

    address internal constant PLUG_REWARDS_ADDRESS = 0x00000000521807eAa08E92E42B139d87992b0376;

    bytes internal constant PLUG_SOCKET_INITCODE =
        hex"60a060405234607657306080526001638b78c6d81955600160007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a3600160005260026020526040600020600160ff19825416179055604051612dda908161007c823960805181818161093d0152610a610152f35b600080fdfe60806040526004361015610015575b3661226657005b60003560e01c806306fdde03146101f55780630d6a5f4d146101f05780631e2950fb146101eb57806325692962146101e657806327020df5146101e157806334bb3700146101dc578063485cc955146101d75780634f1ef286146101d257806352d1902d146101cd57806354d1f13d146101c857806354fd4d50146101c357806360cd27ad146101be5780636f69f3d6146101b9578063715018a6146101b4578063733564b7146101af578063812a4729146101aa578063816a1e5f146101a557806385ab746d146101a05780638954bf061461019b5780638da5cb5b1461019657806395d89b4114610191578063969f7e1b1461018c578063b496003d14610187578063be04d3d614610182578063c2fb26a61461017d578063dfe86ac514610178578063e7d1bfc714610173578063f04e283e1461016e578063f2fde38b146101695763fee81cf40361000e576114e7565b6114a7565b611451565b611370565b611352565b6112e1565b611243565b61122b565b6111f0565b61113c565b611104565b6110af565b611074565b610e0b565b610d9e565b610d59565b610c86565b610b94565b610b13565b610af7565b610aaf565b610a4d565b6108e4565b610832565b61076c565b610731565b6106e5565b6106cd565b6106ad565b610256565b60005b83811061020d5750506000910152565b81810151838201526020016101fd565b90601f19601f60209361023b815180928187528780880191016101fa565b0116010190565b90602061025392818152019061021d565b90565b3461028a57600060031936011261028a57610286610272611533565b60405191829160208352602083019061021d565b0390f35b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6080810190811067ffffffffffffffff8211176102da57604052565b61028f565b6040810190811067ffffffffffffffff8211176102da57604052565b60a0810190811067ffffffffffffffff8211176102da57604052565b90601f601f19910116810190811067ffffffffffffffff8211176102da57604052565b60405190610349604083610317565b565b73ffffffffffffffffffffffffffffffffffffffff81160361028a57565b35906103498261034b565b67ffffffffffffffff81116102da5760051b60200190565b60ff81160361028a57565b67ffffffffffffffff81116102da57601f01601f191660200190565b9291926103bf82610397565b916103cd6040519384610317565b82948184528183011161028a578281602093846000960137010152565b9080601f8301121561028a57816020610253933591016103b3565b919082608091031261028a5760405161041d816102be565b6060808294803561042d8161038c565b8452602081013560208501526040810135604085015201359161044f8361038c565b0152565b81601f8201121561028a5780359061046a82610374565b926104786040519485610317565b828452602060a081860194028301019181831161028a57602001925b8284106104a2575050505090565b600060a0858403126104df5750602060a0916040516104c0816102df565b863581526104d085848901610405565b83820152815201930192610494565b80fd5b919060a08382031261028a57604051906104fb826102fb565b819380356105088161038c565b835261051660208201610369565b6020840152604081013567ffffffffffffffff811161028a578261053b9183016103ea565b60408401526060810135606084015260808101359167ffffffffffffffff831161028a5760809261056c9201610453565b910152565b9080601f8301121561028a57813561058881610374565b926105966040519485610317565b81845260208085019260051b8201019183831161028a5760208201905b8382106105c257505050505090565b813567ffffffffffffffff811161028a576020916105e5878480948801016104e2565b8152019101906105b3565b919060808382031261028a5760405190610609826102be565b819361061481610369565b8352602081013567ffffffffffffffff811161028a5782610636918301610571565b6020840152604081013567ffffffffffffffff811161028a578261065b9183016103ea565b604084015260608101359167ffffffffffffffff831161028a5760609261056c92016103ea565b602060031982011261028a576004359067ffffffffffffffff821161028a57610253916004016105f0565b3461028a5760206106c56106c036610682565b61156e565b604051908152f35b3461028a5760206106c56106e036610682565b611603565b600060031936011261028a5763389a75e1600c52336000526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d600080a2005b3461028a57602060031936011261028a5760043567ffffffffffffffff811161028a576106c561076760209236906004016104e2565b611654565b3461028a57602060031936011261028a5760043567ffffffffffffffff811161028a576080600319823603011261028a57604051906107aa826102be565b806004013567ffffffffffffffff811161028a576107ce90600436918401016103ea565b825260248101359167ffffffffffffffff831161028a576064610822926107fe61028695600436918401016103ea565b60208401526044810135604084015201356108188161034b565b60608201526116ea565b6040519081529081906020820190565b3461028a57604060031936011261028a5773ffffffffffffffffffffffffffffffffffffffff6004356108648161034b565b81602435916108728361034b565b1680638b78c6d8195560007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a316806108a957005b6000526002602052604060002060017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055600080f35b604060031936011261028a576004356108fc8161034b565b6024359067ffffffffffffffff821161028a573660238301121561028a5781600401359067ffffffffffffffff821161028a57366024838501011161028a577f00000000000000000000000000000000000000000000000000000000000000003014610a3f5773ffffffffffffffffffffffffffffffffffffffff9061098061229e565b163d6000526352d1902d6001527f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc602060016004601d855afa5103610a3157807fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b600080a281817f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc55610a0f57005b816000926024604051950185378338925af415610a2857005b3d6000823e3d90fd5b6355299b496001526004601dfd5b639f03a0266000526004601cfd5b3461028a57600060031936011261028a57307f000000000000000000000000000000000000000000000000000000000000000003610a3f5760206040517f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc8152f35b600060031936011261028a5763389a75e1600c523360005260006020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c92600080a2005b3461028a57600060031936011261028a57610286610272611771565b3461028a57602060031936011261028a5773ffffffffffffffffffffffffffffffffffffffff600435610b458161034b565b166000526002602052602060ff604060002054166040519015158152f35b9181601f8401121561028a5782359167ffffffffffffffff831161028a576020808501948460051b01011161028a57565b3461028a57604060031936011261028a5760043567ffffffffffffffff811161028a57610bc5903690600401610b63565b60243567ffffffffffffffff811161028a57610be5903690600401610b63565b610bf092919261229e565b60005b828110610bfc57005b610c078183866117db565b3590811515820361028a57610c8060019273ffffffffffffffffffffffffffffffffffffffff610c3884888b6117db565b35610c428161034b565b16600052600260205260406000209060ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0083541691151516179055565b01610bf3565b600060031936011261028a57610c9a61229e565b6000638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a36000638b78c6d81955005b919060408382031261028a5760405190610ceb826102df565b8193803567ffffffffffffffff811161028a5782610d0a9183016105f0565b835260208101359167ffffffffffffffff831161028a5760209261056c92016103ea565b602060031982011261028a576004359067ffffffffffffffff821161028a5761025391600401610cd2565b3461028a576020610d80610d6c36610d2e565b82610d778251611603565b91015190612307565b73ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461028a57602060031936011261028a5760043567ffffffffffffffff811161028a576106c5610dd46020923690600401610453565b611843565b9081604091031261028a5790565b606060206102539381845260ff81511682850152015191604080820152019061021d565b604060031936011261028a5760043567ffffffffffffffff811161028a57610e37903690600401610dd9565b60243590610e448261034b565b610e4c61188c565b503068929eee149b4bd212685414611066573068929eee149b4bd2126855610e9f610e826106e0610e7d84806118a6565b6123ad565b610e99610e9260208501856123b8565b36916103b3565b90612307565b610edc610ecb610ec5610ebf610eb586806118a6565b60608101906123b8565b90612409565b60a01c90565b6bffffffffffffffffffffffff1690565b6001610eff826001908060081c6000528160205260ff60406000205491161c1690565b15151461101257610f29908060081c6000526001602052600160ff604060002092161b8154179055565b610f5d610f568273ffffffffffffffffffffffffffffffffffffffff166000526002602052604060002090565b5460ff1690565b908115610fe8575b5015610f905761028691610f78916118d9565b3868929eee149b4bd212685560405191829182610de7565b60405163cd0e140160e01b815280610fe46004820160809060ff815260406020820152601a60408201527f506c7567436f72653a7369676e61747572652d696e76616c696400000000000060608201520190565b0390fd5b905073ffffffffffffffffffffffffffffffffffffffff80638b78c6d81954921691161438610f65565b60405163cd0e140160e01b815280610fe46004820160809060ff815260406020820152601660408201527f506c7567436f72653a6e6f6e63652d696e76616c69640000000000000000000060608201520190565b63ab143c066000526004601cfd5b3461028a5760a060031936011261028a5760206106c5604051611096816102df565b60043581526110a6366024610405565b8382015261210b565b3461028a57608060031936011261028a5760206106c56040516110d1816102be565b6004356110dd8161038c565b81526024358382015260443560408201526064356110fa8161038c565b606082015261215f565b3461028a57600060031936011261028a576020638b78c6d8195473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461028a57600060031936011261028a57611155611533565b80519060405191808352600091825b8281106111b957505050600581116111b1575b801561119e575b80601f19918352820161119960208201938460405284610242565b030190f35b5064504c5547536020820152600461117e565b506005611177565b6020818301015160001a605b811060408211166111da575b50600101611164565b84600192959160208493890101530193906111d1565b3461028a57602060031936011261028a5760043567ffffffffffffffff811161028a576106c56112266020923690600401610571565b6121c8565b3461028a5760206106c561123e36610d2e565b61220b565b3461028a57602060031936011261028a5760043567ffffffffffffffff811161028a576106c561123e60209261127e36913690600401610dd9565b610cd2565b60208152608073ffffffffffffffffffffffffffffffffffffffff60606112ce6112b8865185602088015260a087019061021d565b6020870151601f1987830301604088015261021d565b9460408101518286015201511691015290565b3461028a57600060031936011261028a5760006060604051611302816102be565b818152816020820152826040820152015261028661131e611533565b611326611771565b60405191611333836102be565b8252602082015246604082015230606082015260405191829182611283565b3461028a57600060031936011261028a576020600054604051908152f35b602060031936011261028a5760043567ffffffffffffffff811161028a576080600319823603011261028a576113a461188c565b503068929eee149b4bd212685414611066573068929eee149b4bd212685573ffffffffffffffffffffffffffffffffffffffff638b78c6d819541633148015611448575b156113fc57610f7861028691600401612660565b608460405163cd0e140160e01b815260ff600482015260406024820152601760448201527f506c7567436f72653a73656e6465722d696e76616c69640000000000000000006064820152fd5b503033146113e8565b602060031936011261028a576004356114698161034b565b61147161229e565b63389a75e1600c52806000526020600c20908154421161149957600061149792556122bb565b005b636f5e88186000526004601cfd5b602060031936011261028a576004356114bf8161034b565b6114c761229e565b8060601b156114d957611497906122bb565b637448fbae6000526004601cfd5b3461028a57602060031936011261028a576004356115048161034b565b63389a75e1600c52600052602080600c2054604051908152f35b6040519061152d602083610317565b60008252565b60405190611542604083610317565b600b82527f506c756720536f636b65740000000000000000000000000000000000000000006020830152565b73ffffffffffffffffffffffffffffffffffffffff8151169061159460208201516121c8565b90606060408201516020815191012091015160208151910120906040519260208401947fad37dd17963f530e0696a34fb50e96c004ad0a3380a5e9c1dc82de9eb692b5d9865260408501526060840152608083015260a082015260a081526115fd60c082610317565b51902090565b61160f6000549161156e565b6040519060208201927f1901000000000000000000000000000000000000000000000000000000000000845260228301526042820152604281526115fd606282610317565b60ff8151169073ffffffffffffffffffffffffffffffffffffffff602082015116906040810151602081519101209061169560806060830151920151611843565b916040519360208501957f8adbed414e194dcdb13ff4e505a6ab838020fe2e144c9d773a6a63b399104584875260408601526060850152608084015260a083015260c082015260c081526115fd60e082610317565b805160208151910120906020810151602081519101209073ffffffffffffffffffffffffffffffffffffffff6060604083015192015116906040519260208401947f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f865260408501526060840152608083015260a082015260a081526115fd60c082610317565b60405190611780604083610317565b600582527f302e302e310000000000000000000000000000000000000000000000000000006020830152565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156117eb5760051b0190565b6117ac565b356102538161034b565b80518210156117eb5760209160051b010190565b60208061034992949394604051958161183088935180928680870191016101fa565b8201908382015203018085520183610317565b6060906000908051905b818310611861575050506020815191012090565b90919261188360019161187d61187787866117fa565b5161210b565b9061180e565b9301919061184d565b60405190611899826102df565b6060602083600081520152565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff818136030182121561028a570190565b6118e390806118a6565b906000906118ef61188c565b50604083016118fe81856123b8565b9050611f90575b50506020820191611916838261246f565b9293849150611924846124c3565b9282955b60ff87169086821015611f6c578461194a83611944878761246f565b90612551565b61195a610e9260408301836123b8565b92608082016119698184612591565b859291505b808310611af357505050600161198c611986846125f5565b60ff1690565b03611a245750916119a060208394016117f0565b602082519201905af4906119bc6119b5612630565b91876117fa565b52955b86156119d4576119ce9061253b565b95611928565b6040805163cd0e140160e01b815260ff9290921660048301526024820152601460448201527f506c7567436f72653a706c75672d6661696c65640000000000000000000000006064820152608490fd5b60ff611a2f836125f5565b16611a60575091611a4360208394016117f0565b82602083519301915af190611a596119b5612630565b52956119bf565b909150600260ff611a70846125f5565b1603611aa157508591816060611a8960208695016117f0565b910135602083519301915af190611a596119b5612630565b98929190600360ff611ab2836125f5565b1614611ac1575b5050506119bf565b869293995090611ad460208493016117f0565b602082519201905afa90611ae96119b5612630565b5295388080611ab9565b91959092939450611b0e86611b088588612591565b906125e5565b611b26611b20611986602084016125f5565b8d6117fa565b519060808101611b38611986826125f5565b611c7e57506060810135916040820135611b52848261260d565b825110611c24579081611b6885611b6e9461260d565b91612d2d565b918135611b7b828261260d565b855110611bca5793611bae611bbd948f94611ba990611b9f611bb79660019a61260d565b965b503584612cb3565b612d5b565b92815191612d2d565b90612d5b565b950190918994939261196e565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a776f756c642d6f766572666c6f7700000000000000000060608201520190565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601660408201527f506c7567436f72653a6f75742d6f662d626f756e64730000000000000000000060608201520190565b813592602084820101518151811015611f1157602081830101805193611cac85611ca7856125ff565b61260d565b845110611eb4579081600160ff611cc388956125f5565b16148015611e9f575b15611d935750611cdc905161261a565b11611d385790611cfd915b611b6884611ca7611cf7846125ff565b936125ff565b92611d0b82611ca7836125ff565b855110611bca5793611bae611bbd948f94611ba990611d32611bb796611ca760019b6125ff565b96611ba1565b505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601d60408201527f506c7567436f72653a61727261792d6c656e6774682d696e76616c696400000060608201520190565b915050600360ff611da3836125f5565b1603611e17575060208310611dbc5790611cfd91611ce7565b505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601960408201527f506c7567436f72653a7374727563742d746f6f2d736d616c6c0000000000000060608201520190565b60ff611e246005926125f5565b161480611e95575b611e3a5790611cfd91611ce7565b505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601c60408201527f506c7567436f72653a6b65792d76616c75652d746f6f2d736d616c6c0000000060608201520190565b5060408310611e2c565b50600460ff611ead836125f5565b1614611ccc565b5050505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a696e76616c69642d6c656e67746800000000000000000060608201520190565b505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a696e76616c69642d6f666673657400000000000000000060608201520190565b5050505050505050611f7c61033a565b60ff8152611f8861151e565b602082015290565b6040611f9c82866123b8565b9050106120b757611fad81856123b8565b503542116120635773ffffffffffffffffffffffffffffffffffffffff611fff611fe6611fe6611fde8495896123b8565b506020013590565b73ffffffffffffffffffffffffffffffffffffffff1690565b921691160361200f573880611905565b60405163cd0e140160e01b815280610fe46004820160809060ff815260406020820152601760408201527f506c7567436f72653a736f6c7665722d696e76616c696400000000000000000060608201520190565b60405163cd0e140160e01b815280610fe46004820160809060ff815260406020820152601760408201527f506c7567436f72653a736f6c7665722d6578706972656400000000000000000060608201520190565b60405163cd0e140160e01b815280610fe46004820160809060ff815260406020820152601960408201527f506c7567436f72653a736f6c7665722d6d616c666f726d65640000000000000060608201520190565b61211a6020825192015161215f565b6040519060208201927f85c9aec0e14ad33e63489c03355fa65515340a998cc26cd360d11267b451b6fd845260408301526060820152606081526115fd608082610317565b60ff8151169060208101519060ff6060604083015192015116906040519260208401947ff8939514938e0a800705081290e2e4c7efcf49061b28bf5b38f457c851eb82ac865260408501526060840152608083015260a082015260a081526115fd60c082610317565b6060906000908051905b8183106121e6575050506020815191012090565b90919261220260019161187d6121fc87866117fa565b51611654565b930191906121d2565b6020612217825161156e565b910151602081519101206040519060208201927f4223462a204a553d0ecb26b955c1f59fcf6a0662da793ddfd0d17a33c99b97f2845260408301526060820152606081526115fd608082610317565b60003560e01c63bc197c81811463f23a6e6182141763150b7a0282141761229557633c10b94e6000526004601cfd5b6020526020603cf35b638b78c6d8195433036122ad57565b6382b429006000526004601cfd5b73ffffffffffffffffffffffffffffffffffffffff1680638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3638b78c6d81955565b919091604051928051806040146123715760411461233257505050505b638baa579f6000526004601cfd5b602091606082015160001a835260408201516060525b60005201516040526020600160806000825afa519160006060526040523d610349575050612324565b506020917f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6040830151601b8160ff1c01855216606052612348565b6102539036906105f0565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18136030182121561028a570180359067ffffffffffffffff821161028a5760200191813603831361028a57565b919091357fffffffffffffffffffffffff0000000000000000000000000000000000000000811692600c811061243d575050565b7fffffffffffffffffffffffff00000000000000000000000000000000000000009293508290600c0360031b1b161690565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18136030182121561028a570180359067ffffffffffffffff821161028a57602001918160051b3603831361028a57565b906124cd82610374565b6124da6040519182610317565b828152601f196124ea8294610374565b019060005b8281106124fb57505050565b8060606020809385010152016124ef565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60ff1660ff811461254c5760010190565b61250c565b91908110156117eb5760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff618136030182121561028a570190565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18136030182121561028a570180359067ffffffffffffffff821161028a576020019160a082023603831361028a57565b91908110156117eb5760a0020190565b356102538161038c565b906020820180921161254c57565b9190820180921161254c57565b908160051b918083046020149015171561254c57565b3d1561265b573d9061264182610397565b9161264f6040519384610317565b82523d6000602084013e565b606090565b61266861188c565b506040810161267781836123b8565b9050612c5b575b506020810161268d818361246f565b919050600090819361269e846124c3565b92945b60ff86169085821015612c4c576126bc82611944868661246f565b6126cc610e9260408301836123b8565b91608082016126db8184612591565b60009291505b8083106128135750505060016126f9611986846125f5565b03612743575060009161270f60208493016117f0565b602082519201905af49061272b612724612630565b91866117fa565b52945b85156119d45761273d9061253b565b946126a1565b60ff61274e836125f5565b16612781575060009161276460208493016117f0565b82602083519301915af19061277a612724612630565b529461272e565b600260ff61278e846125f5565b16036127c057506000918160606127a860208695016117f0565b910135602083519301915af19061277a612724612630565b97929190600360ff6127d1836125f5565b16146127e0575b50505061272e565b600092939850906127f460208493016117f0565b602082519201905afa90612809612724612630565b52943880806127d8565b90919461282486611b088588612591565b9061283d612837611986602085016125f5565b8c6117fa565b516080830161284e611986826125f5565b61297157506060830135906040840135612868838261260d565b825110612918579081611b688461287e9461260d565b90833561288b828261260d565b8451106128bf5792611bae60019593611ba96128ad611bb7956128b69861260d565b955b3584612cb3565b950191906126e1565b50610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a776f756c642d6f766572666c6f7700000000000000000060608201520190565b50610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601660408201527f506c7567436f72653a6f75742d6f662d626f756e64730000000000000000000060608201520190565b833591602083820101518151811015612bf25760208183010180519361299a85611ca7856125ff565b845110612b96579081600160ff6129b188956125f5565b16148015612b81575b15612a7757506129ca905161261a565b11612a1d57906129e491611b6884611ca7611cf7846125ff565b916129f282611ca7836125ff565b8451106128bf5792611bae60019593611ba9612a17611bb795611ca76128b6996125ff565b956128af565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601d60408201527f506c7567436f72653a61727261792d6c656e6774682d696e76616c696400000060608201520190565b915050600360ff612a87836125f5565b1603612afa575060208310612aa057906129e491611ce7565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601960408201527f506c7567436f72653a7374727563742d746f6f2d736d616c6c0000000000000060608201520190565b60ff612b076005926125f5565b161480612b77575b612b1d57906129e491611ce7565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601c60408201527f506c7567436f72653a6b65792d76616c75652d746f6f2d736d616c6c0000000060608201520190565b5060408310612b0f565b50600460ff612b8f836125f5565b16146129ba565b50505050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a696e76616c69642d6c656e67746800000000000000000060608201520190565b5050610fe48f60405191829163cd0e140160e01b83526004830160ff60809216815260406020820152601760408201527f506c7567436f72653a696e76616c69642d6f666673657400000000000000000060608201520190565b50505050505050611f7c61033a565b6040612c6782846123b8565b9050106120b757612c7881836123b8565b5035421161206357612ca8611fe6611fe6611fde73ffffffffffffffffffffffffffffffffffffffff94866123b8565b1661200f573861267e565b9190600092606093815183811115612d25575b8015612d1d575b50828110612cda57505050565b6040519450918290039101601f19601f830181165b8083015181870152018015612d0757601f1990612cef565b5050604081840160006020820152016040528252565b905038612ccd565b925082612cc6565b805160609493929083811115612d53575b81811115612d1d5750828110612cda57505050565b925082612d3e565b91909160405192815191601f198060208501165b8083015181880152018015612d8757601f1990612d6f565b5050805190828501601f198060208501165b808401518184015201918215612db35791601f1990612d99565b50505060409101808401906000602083015284520160405256fea164736f6c634300081a000a";

    bytes32 internal constant PLUG_SOCKET_SALT =
        0x000000000000000000000000000000000000000013e2f19175f6dc35ed4081d4;

    address internal constant PLUG_SOCKET_ADDRESS = 0x000000004321f57fFC6649F6b03b8a4FBbFa1EEA;

    bytes internal constant PLUG_TICKET_INITCODE =
        hex"6080604052346048576001638b78c6d81955600160007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a3604051611064908161004e8239f35b600080fdfe608080604052600436101561001357600080fd5b60003560e01c90816301ffc9a714610b405750806306fdde0314610ae9578063081812fc14610a76578063095ea7b3146109975780631249c58b1461081557806318160ddd146107f757806323b872dd146107e5578063256929621461079957806342842e0e1461075f57806354d1f13d146107175780636352211e1461069d57806370a0823114610672578063715018a6146106265780638129fc1c146105335780638da5cb5b146104fb57806395d89b41146104a4578063a22cb4651461041f578063b88d4fde1461035c578063c87b56dd14610227578063e985e9c5146101e2578063f04e283e14610192578063f2fde38b146101545763fee81cf41461011c57600080fd5b3461014f57602060031936011261014f57610135610c0f565b63389a75e1600c52600052602080600c2054604051908152f35b600080fd5b602060031936011261014f57610168610c0f565b610170610fee565b8060601b15610184576101829061100b565b005b637448fbae6000526004601cfd5b602060031936011261014f576101a6610c0f565b6101ae610fee565b63389a75e1600c52806000526020600c2090815442116101d4576000610182925561100b565b636f5e88186000526004601cfd5b3461014f57604060031936011261014f576101fb610c0f565b610203610c32565b601c52670a5a2e7a0000000060085260005260206030600c20546040519015158152f35b3461014f57602060031936011261014f576040516080810160a0820160405260008152600a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600435925b01918181066030018353049081156102ad577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600a91610272565b61031d61034c603d85610358946080817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0810193030182526040519485927f68747470733a2f2f6f6e706c75672e696f2f63616e7661732f6e66742f000000602085015251809285850190610ba2565b810103017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08101835282610ca9565b60405191829182610bc5565b0390f35b608060031936011261014f57610370610c0f565b610378610c32565b6044356064359167ffffffffffffffff831161014f573660238401121561014f5782600401359367ffffffffffffffff851161014f57366024868601011161014f576103c5838383610d19565b813b6103cd57005b6000602061018296806024837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116019861040e6040519a8b610ca9565b828a52018389013786010152610f32565b3461014f57604060031936011261014f57610438610c0f565b6024359081151580920361014f5773ffffffffffffffffffffffffffffffffffffffff9181601c52670a5a2e7a0000000060085233600052806030600c205560005216337f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3160206000a3005b3461014f57600060031936011261014f5761035860408051906104c78183610ca9565b600682527f5449434b4554000000000000000000000000000000000000000000000000000060208301525191829182610bc5565b3461014f57600060031936011261014f576020638b78c6d8195473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461014f57600060031936011261014f577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffbf60113280548060038355610600575b5073096e3b79b5d861c527f148bd02614d4fc917ac17638b78c6d819558073096e3b79b5d861c527f148bd02614d4fc917ac1760007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a36105d057005b6002905560016020527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2602080a1005b600181811c14303b10156106185760ff1b1b81610571565b63f92ee8a96000526004601cfd5b600060031936011261014f5761063a610fee565b6000638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a36000638b78c6d81955005b3461014f57602060031936011261014f576020610695610690610c0f565b610ee8565b604051908152f35b3461014f57602060031936011261014f5773ffffffffffffffffffffffffffffffffffffffff600435806000527f7d8825530a5a2e7a000000000000000000000000000000000000000000000000601c5260206000208101015416801561070957602090604051908152f35b63ceea21b66000526004601cfd5b600060031936011261014f5763389a75e1600c523360005260006020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c92600080a2005b61076836610c55565b6107758183859495610d19565b823b61077d57005b6101829260405192610790602085610ca9565b60008452610f32565b600060031936011261014f5763389a75e1600c52336000526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d600080a2005b6101826107f136610c55565b91610d19565b3461014f57600060031936011261014f576020600054604051908152f35b3461014f57600060031936011261014f57333b1561096d5761083633610ee8565b610943576000547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146109145760018101600055806000527f7d8825530a5a2e7a000000000000000000000000000000000000000000000000601c5260206000208101810180548060601b610906573317905533600052601c600c2060018154019063ffffffff82163302156108f157553360007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8180a4005b67ea553b3401336cea331560021b526004601cfd5b63c991cbb16000526004601cfd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7fddefae280000000000000000000000000000000000000000000000000000000060005260046000fd5b7f260e57460000000000000000000000000000000000000000000000000000000060005260046000fd5b604060031936011261014f576109ab610c0f565b6024359073ffffffffffffffffffffffffffffffffffffffff1681600052337f7d8825530a5a2e7a00000000000000000000000000000000000000000000000017601c52602060002082018201805473ffffffffffffffffffffffffffffffffffffffff1690811561070957829082331433151715610a50575b600101557f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925600080a4005b9050816000526030600c205415610a68578290610a25565b634b6e7f186000526004601cfd5b3461014f57602060031936011261014f57600435806000527f7d8825530a5a2e7a000000000000000000000000000000000000000000000000601c526020600020810101805460601b15610709576020906001015473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461014f57600060031936011261014f576103586040805190610b0c8183610ca9565b600c82527f506c75673a205469636b6574000000000000000000000000000000000000000060208301525191829182610bc5565b3461014f57602060031936011261014f57600435907fffffffff000000000000000000000000000000000000000000000000000000008216820361014f5760209160e01c635b5e139f8114906301ffc9a76380ac58cd82149114171715158152f35b60005b838110610bb55750506000910152565b8181015183820152602001610ba5565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f60409360208452610c088151809281602088015260208888019101610ba2565b0116010190565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361014f57565b6024359073ffffffffffffffffffffffffffffffffffffffff8216820361014f57565b600319606091011261014f5760043573ffffffffffffffffffffffffffffffffffffffff8116810361014f579060243573ffffffffffffffffffffffffffffffffffffffff8116810361014f579060443590565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff821117610cea57604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b73ffffffffffffffffffffffffffffffffffffffff8116158015610eca575b610d66577f30d4e75d0000000000000000000000000000000000000000000000000000000060005260046000fd5b73ffffffffffffffffffffffffffffffffffffffff169073ffffffffffffffffffffffffffffffffffffffff169082600052337f7d8825530a5a2e7a00000000000000000000000000000000000000000000000017601c5260206000208301830180548073ffffffffffffffffffffffffffffffffffffffff16838114810215610eb55750826000528160010180548033148533141715610e9d575b610e93575b50838318189055601c600c207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff815401905581600052601c600c2060018154019063ffffffff8216840215610e7e57557fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef600080a4565b67ea553b3401336cea841560021b526004601cfd5b6000905538610e07565b6030600c2054610e0257634b6e7f186000526004601cfd5b67ceea21b6a1148100901560021b526004601cfd5b5073ffffffffffffffffffffffffffffffffffffffff821615610d38565b8015610f24577f7d8825530a5a2e7a000000000000000000000000000000000000000000000000601c5260005263ffffffff601c600c20541690565b638f4eb6046000526004601cfd5b9060a473ffffffffffffffffffffffffffffffffffffffff9460209460405196879563150b7a0287523388880152166040860152606085015260808085015280518091818060a0880152610fda575b505001906000601c8401915af115610fcb575b517feaf485fe0000000000000000000000000000000000000000000000000000000001610fbd57565b63d1a57ed66000526004601cfd5b3d15610f94573d6000823e3d90fd5b818760c08801920160045afa508038610f81565b638b78c6d819543303610ffd57565b6382b429006000526004601cfd5b73ffffffffffffffffffffffffffffffffffffffff1680638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3638b78c6d8195556fea164736f6c634300081a000a";

    bytes32 internal constant PLUG_TICKET_SALT =
        0x0000000000000000000000000000000000000000a7667aedf211a71b59d60e41;

    address internal constant PLUG_TICKET_ADDRESS = 0x00000000B6B893692B3f02b32b567bffB56B8772;

    bytes internal constant PLUG_TOKEN_INITCODE =
        hex"608060405234606057600080546001600160401b0319166001600160401b031781556001638b78c6d819819055907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a36040516114c390816100668239f35b600080fdfe608080604052600436101561001357600080fd5b60003560e01c90816301ffc9a714610f6e5750806306fdde0314610f20578063095ea7b314610e8157806318160ddd14610e5b57806318bf507714610d6a57806323b872dd14610c5b5780632569296214610c0f5780632b8c49e314610b21578063313ce56714610b055780633644e51514610a5857806354d1f13d14610a105780635f69b8aa146109b857806370a0823114610985578063715018a6146109395780637ecebe00146109065780638129fc1c1461074b5780638da5cb5b14610713578063902d55a5146106ed57806395d89b411461069b578063a9059cbb146105ff578063c438891a1461057b578063c6d301cc14610555578063cf2e408d146104ef578063d09a6a62146104cb578063d505accf146102af578063dd62ed3e1461027b578063f04e283e1461022b578063f2fde38b146101ed578063f4eae6dd146101a15763fee81cf41461016957600080fd5b3461019c57602060031936011261019c576101826110a5565b63389a75e1600c52600052602080600c2054604051908152f35b600080fd5b3461019c57602060031936011261019c5773ffffffffffffffffffffffffffffffffffffffff6101cf6110a5565b166000526001602052602060ff604060002054166040519015158152f35b602060031936011261019c576102016110a5565b61020961144d565b8060601b1561021d5761021b9061146a565b005b637448fbae6000526004601cfd5b602060031936011261019c5761023f6110a5565b61024761144d565b63389a75e1600c52806000526020600c20908154421161026d57600061021b925561146a565b636f5e88186000526004601cfd5b3461019c57604060031936011261019c5760206102a76102996110a5565b6102a16110c8565b906111a3565b604051908152f35b3461019c5760e060031936011261019c576102c86110a5565b6102d06110c8565b604435916064356084359260ff8416840361019c5773ffffffffffffffffffffffffffffffffffffffff16938019156e22d473030f116ddee9f6b43ac78ba3861817156104bd5761031f6110eb565b60208101907f506c7567000000000000000000000000000000000000000000000000000000008252519020908242116104af5773ffffffffffffffffffffffffffffffffffffffff60405194169465383775081901600e528560005260c06020600c20958654957f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f8252602082019586528660408301967fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc688528b6060850198468a528c608087019330855260a08820602e527f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c9885252528688525260a082015220604e526042602c2060005260ff1660205260a43560405260c4356060526020806080600060015afa93853d51036104a1577f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259460209401905585777f5e9f200000000000000000000000000000000000000000176040526034602c2055a3005b63ddafbaef6000526004601cfd5b631a15a3cc6000526004601cfd5b633f68539a6000526004601cfd5b3461019c57600060031936011261019c57602063ffffffff60005416604051908152f35b3461019c57602060031936011261019c5760043563ffffffff8116810361019c5761051861144d565b7fffffffffffffffffffffffffffffffffffffffffffffffff00000000ffffffff67ffffffff000000006000549260201b16911617600055600080f35b3461019c57600060031936011261019c57602063ffffffff600054821c16604051908152f35b3461019c57604060031936011261019c576105946110a5565b6024359081151580920361019c5773ffffffffffffffffffffffffffffffffffffffff906105c061144d565b16600052600160205260406000209060ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff008354169116179055600080f35b3461019c57604060031936011261019c576106186110a5565b6024359061062681336113ba565b6387a211a2600c52336000526020600c20805480841161068d5783900390556000526020600c20818154019055602052600c5160601c337fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef602080a3602060405160018152f35b63f4d678b86000526004601cfd5b3461019c57600060031936011261019c576106e96106b76110eb565b7f504c55470000000000000000000000000000000000000000000000000000000060208201526040519182918261103d565b0390f35b3461019c57600060031936011261019c5760206040516a0771d2fa45345aa90000008152f35b3461019c57600060031936011261019c576020638b78c6d8195473ffffffffffffffffffffffffffffffffffffffff60405191168152f35b3461019c57600060031936011261019c577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffbf601132805480600383556108e0575b5073096e3b79b5d861c527f148bd02614d4fc917ac17638b78c6d8195573096e3b79b5d861c527f148bd02614d4fc917ac1760007f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08180a36107fe73096e3b79b5d861c527f148bd02614d4fc917ac17611388565b6805345cdf77eb68f44c546a0771d2fa45345aa900000081019081106108d2576805345cdf77eb68f44c556387a211a2600c5273096e3b79b5d861c527f148bd02614d4fc917ac176000526020600c206a0771d2fa45345aa900000081540190556a0771d2fa45345aa900000060205280600c5160601c60007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef602080a36108a257005b6002905560016020527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2602080a1005b63e5cfe9576000526004601cfd5b600181811c14303b10156108f85760ff1b1b81610789565b63f92ee8a96000526004601cfd5b3461019c57602060031936011261019c5761091f6110a5565b6338377508600c52600052602080600c2054604051908152f35b600060031936011261019c5761094d61144d565b6000638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a36000638b78c6d81955005b3461019c57602060031936011261019c5761099e6110a5565b6387a211a2600c52600052602080600c2054604051908152f35b3461019c57602060031936011261019c5760043563ffffffff811680910361019c576109e261144d565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000006000541617600055600080f35b600060031936011261019c5763389a75e1600c523360005260006020600c2055337ffa7b8eab7da67f412cc9575ed43464468f9bfbae89d1675917346ca6d8fe3c92600080a2005b3461019c57600060031936011261019c57602060a0610a756110eb565b828101907f506c7567000000000000000000000000000000000000000000000000000000008252519020604051907f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f8252838201527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc6604082015246606082015230608082015220604051908152f35b3461019c57600060031936011261019c57602060405160128152f35b3461019c57604060031936011261019c57610b3a6110a5565b60243590610b5d734200000000000000000000000000000000000028331461113e565b610b668161120d565b6387a211a2600c52806000526020600c209081549182841161068d578373ffffffffffffffffffffffffffffffffffffffff93039055826805345cdf77eb68f44c54036805345cdf77eb68f44c5582600052166000817fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef602083a36040519182527fb90795a66650155983e242cac3e1ac1a4dc26f8ed2987f3ce416a34e00111fd460203393a3005b600060031936011261019c5763389a75e1600c52336000526202a30042016020600c2055337fdbf36a107da19e49527a7176a1babf963b4b0ff8cde35ee35d6cd8f1f9ac7e1d600080a2005b3461019c57606060031936011261019c57610c746110a5565b610c7c6110c8565b60443590610c8a81846113ba565b8260601b6e22d473030f116ddee9f6b43ac78ba33303610d1f575b6387a211a217600c526020600c20805480841161068d5783900390556000526020600c2081815401905560205273ffffffffffffffffffffffffffffffffffffffff600c5160601c91167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef602080a3602060405160018152f35b33602052637f5e9f208117600c526034600c20908154918219610d45575b509050610ca5565b828511610d5c57846387a211a29303905585610d3d565b6313be252b6000526004601cfd5b3461019c57604060031936011261019c57610d836110a5565b602435610da5734200000000000000000000000000000000000028331461113e565b610dae82611388565b6805345cdf77eb68f44c548181019081106108d2576805345cdf77eb68f44c556387a211a2600c52816000526020600c2081815401905580602052600c5160601c60007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef602080a36040519081527fde22baff038e3a3e08407cbdf617deed74e869a7ba517df611e33131c6e6ea04602073ffffffffffffffffffffffffffffffffffffffff33941692a3005b3461019c57600060031936011261019c5760206805345cdf77eb68f44c54604051908152f35b3461019c57604060031936011261019c57610e9a6110a5565b602435908119156e22d473030f116ddee9f6b43ac78ba373ffffffffffffffffffffffffffffffffffffffff83161817156104bd57602052637f5e9f20600c5233600052806034600c2055600052602c5160601c337f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560206000a3602060405160018152f35b3461019c57600060031936011261019c576106e9610f3c6110eb565b7f506c75670000000000000000000000000000000000000000000000000000000060208201526040519182918261103d565b3461019c57602060031936011261019c57600435907fffffffff00000000000000000000000000000000000000000000000000000000821680920361019c57817f333319940000000000000000000000000000000000000000000000000000000060209314908115611013575b8115610fe9575b5015158152f35b7f01ffc9a70000000000000000000000000000000000000000000000000000000091501483610fe2565b7f36372b070000000000000000000000000000000000000000000000000000000081149150610fdb565b9190916020815282519283602083015260005b84811061108f5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8460006040809697860101520116010190565b8060208092840101516040828601015201611050565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361019c57565b6024359073ffffffffffffffffffffffffffffffffffffffff8216820361019c57565b604051906040820182811067ffffffffffffffff82111761110f5760405260048252565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b1561114557565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600c60248201527f556e617574686f72697a656400000000000000000000000000000000000000006044820152fd5b906e22d473030f116ddee9f6b43ac78ba373ffffffffffffffffffffffffffffffffffffffff8216146111e757602052637f5e9f20600c526000526034600c205490565b50507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff90565b73420000000000000000000000000000000000002833146113155773ffffffffffffffffffffffffffffffffffffffff168015801561130d575b61130a5763ffffffff60005416421090816112ef575b816112c8575b5061126a57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f506c7567546f6b656e3a7472616e736665722d6c6f636b6564000000000000006044820152fd5b905073ffffffffffffffffffffffffffffffffffffffff638b78c6d8195416141538611263565b809150600052600160205260ff60406000205416159061125d565b50565b506001611247565b5063ffffffff60005460201c16421061132a57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601760248201527f506c7567546f6b656e3a6272696467652d6c6f636b65640000000000000000006044820152fd5b5073420000000000000000000000000000000000002833146113a657565b63ffffffff60005460201c16421061132a57565b73420000000000000000000000000000000000002833146114375773ffffffffffffffffffffffffffffffffffffffff16908115908115611418575b5061130a5763ffffffff60005416421090816112ef57816112c8575061126a57565b73ffffffffffffffffffffffffffffffffffffffff91501615386113f6565b505063ffffffff60005460201c16421061132a57565b638b78c6d81954330361145c57565b6382b429006000526004601cfd5b73ffffffffffffffffffffffffffffffffffffffff1680638b78c6d819547f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a3638b78c6d8195556fea164736f6c634300081a000a";

    bytes32 internal constant PLUG_TOKEN_SALT =
        0x000000000000000000000000000000000000000010601d08ef9b983f4b2ef746;

    address internal constant PLUG_TOKEN_ADDRESS = 0x00000000CB92316643CD22fF3F782f4B75866a34;

    bytes internal constant PLUG_INITCODE =
        hex"60808060405234603757600080546001600160a01b0319166fe8d0c003f601472e5d94fa7bccdd5ec2179055611018908161003d8239f35b600080fdfe6080604052600436101561001257600080fd5b60003560e01c806306fdde031461005757806395d89b4114610052578063996d9ed21461004d57639987b20c1461004857600080fd5b610277565b610172565b610113565b346100b25760006003193601126100b2576100ae604080519061007a818361034a565b600482527f506c756700000000000000000000000000000000000000000000000000000000602083015251918291826100ff565b0390f35b600080fd5b60005b8381106100ca5750506000910152565b81810151838201526020016100ba565b90601f19601f6020936100f8815180928187528780880191016100b7565b0116010190565b9060206101109281815201906100da565b90565b346100b25760006003193601126100b2576100ae6040805190610136818361034a565b600482527f504c5547000000000000000000000000000000000000000000000000000000006020830152519182916020835260208301906100da565b60206003193601126100b25760043567ffffffffffffffff81116100b257366023820112156100b257806004013567ffffffffffffffff81116100b2573660248260051b840101116100b2576101c661039a565b5060007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9d83360301905b8260ff821610156102755760006024611fe08360051b168601013590838212156102725750907f6dc3c3a4e13e1e712e839686c373ae75e0388a5fe963d3bc521e0d84b165005061024960ff9360243391890101610abf565b6102596040519283928684610403565b0390a11660ff811461026d576001016101f0565b6103b4565b80fd5b005b60206003193601126100b25760043567ffffffffffffffff81116100b257604060031982360301126100b2576102d27f6dc3c3a4e13e1e712e839686c373ae75e0388a5fe963d3bc521e0d84b1650050913390600401610abf565b6102f56040519283926000845260208401526060604084015260608301906103e3565b0390a1005b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040810190811067ffffffffffffffff82111761034557604052565b6102fa565b90601f601f19910116810190811067ffffffffffffffff82111761034557604052565b6040519061037c60408361034a565b565b67ffffffffffffffff811161034557601f01601f191660200190565b604051906103a782610329565b6060602083600081520152565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b90604060206101109360ff815116845201519181602082015201906100da565b610110939260ff606093168252602082015281604082015201906103e3565b60ff8116036100b257565b81601f820112156100b25780516104438161037e565b92610451604051948561034a565b818452602082840101116100b25761011091602080850191016100b7565b6020818303126100b25780519067ffffffffffffffff82116100b257016040818303126100b257604051916104a383610329565b81516104ae81610422565b8352602082015167ffffffffffffffff81116100b2576104ce920161042d565b602082015290565b73ffffffffffffffffffffffffffffffffffffffff8116036100b257565b90357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1823603018112156100b257016020813591019167ffffffffffffffff82116100b25781360383136100b257565b601f8260209493601f19938186528686013760008582860101520116010190565b9160209082815201919060005b81811061057f5750505090565b90919260a0806001928635815260ff602088013561059c81610422565b166020820152604087013560408201526060870135606082015260ff60808801356105c681610422565b166080820152019401929101610572565b906020838281520160208260051b85010193836000915b8483106105fe5750505050505090565b909192939495601f1982820301855286357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61843603018112156100b25783019060ff823561064b81610422565b16815273ffffffffffffffffffffffffffffffffffffffff6020830135610671816104d6565b16602082015261069861068760408401846104f4565b60a0604085015260a0840191610544565b916060810135606083015260808101357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1823603018112156100b25701906020823592019067ffffffffffffffff83116100b25760a08302360382136100b2578360209384938360806107119560019903910152610565565b9801969501930191906105ee565b80357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81823603018112156100b2578101916040815273ffffffffffffffffffffffffffffffffffffffff8335610774816104d6565b16604082015260208301357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112156100b257830160208135910167ffffffffffffffff82116100b2578160051b360381136100b2576101109461083c6108316107f461086c9461087796608060608a015260c08901916105d7565b61080160408501856104f4565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc08984030160808a0152610544565b9160608101906104f4565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc08684030160a0870152610544565b9260208101906104f4565b916020818503910152610544565b9073ffffffffffffffffffffffffffffffffffffffff6108b260209295949560408552604085019061071f565b9416910152565b6040513d6000823e3d90fd5b60009060033d116108d257565b905060046000803e60005160e01c90565b600060443d10610110576040516003193d016004823e8051913d602484011167ffffffffffffffff841117610952578282019283519167ffffffffffffffff831161094a576003193d8501016020848701011161094a57506101109291016020019061034a565b949350505050565b92915050565b6000809160233d1161096657565b9150506020600460003e600051600191565b3d156109a3573d906109898261037e565b91610997604051938461034a565b82523d6000602084013e565b606090565b604051906109b760408361034a565b600f82527f506c75673a656d7074792d6461746100000000000000000000000000000000006020830152565b90602082519201517fffffffff0000000000000000000000000000000000000000000000000000000081169260048110610a1b575050565b7fffffffff00000000000000000000000000000000000000000000000000000000929350829060040360031b1b161690565b60405190610a5c60408361034a565b601582527f506c75673a756e6b6e6f776e2d73656c6563746f7200000000000000000000006020830152565b9190916040818403126100b2578051610aa081610422565b92602082015167ffffffffffffffff81116100b257610110920161042d565b9091610b2e6000610ace61039a565b94610ad885610de2565b610ae28682610f6d565b958373ffffffffffffffffffffffffffffffffffffffff6040518097819682957f816a1e5f00000000000000000000000000000000000000000000000000000000845260048401610885565b0393165af160009181610cf8575b50610cf457506001610b4c6108c5565b806308c379a014610cc857634e487b7114610c6c575b610b6857565b9150610b72610978565b6004815110610c56577fcd0e1401000000000000000000000000000000000000000000000000000000007fffffffff00000000000000000000000000000000000000000000000000000000610bc6836109e3565b1603610c37576040519080519060031982019081845260005b828110610c215750505090601c610c059282010160405260208082518301019101610a88565b610c19610c1061036d565b60ff9093168352565b602082015291565b8060246020928401015182828801015201610bdf565b5090610c4161036d565b60fc8152610c4d610a4d565b60208201529190565b5090610c6061036d565b60fb8152610c4d6109a8565b610c74610958565b90610c80575b50610b62565b935050610ca0610cae600094604051928391602083019190602083019252565b03601f19810183528261034a565b610cb661036d565b60fd8152905b60208201529238610c7a565b50610cd16108e3565b80610cdc5750610b62565b935050600092610cea61036d565b60fe815290610cbc565b9250565b610d169192503d806000833e610d0e818361034a565b81019061046f565b9038610b3c565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81813603018212156100b2570190565b35610110816104d6565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1813603018212156100b2570180359067ffffffffffffffff82116100b2576020019181360383136100b257565b91908260409103126100b257815180151581036100b257602090920151610110816104d6565b916020610110938181520191610544565b610df4610def8280610d1d565b610d50565b90813b15610e17575b5073ffffffffffffffffffffffffffffffffffffffff1690565b6040610ea691610e6f610e65610e5e610e4560005473ffffffffffffffffffffffffffffffffffffffff1690565b73ffffffffffffffffffffffffffffffffffffffff1690565b9280610d1d565b6060810190610d5a565b9190600084518096819582947e77436000000000000000000000000000000000000000000000000000000000845260048401610dd1565b03925af1908115610f6857600091610f37575b5073ffffffffffffffffffffffffffffffffffffffff811673ffffffffffffffffffffffffffffffffffffffff83160315610dfd577f5a4be8f40000000000000000000000000000000000000000000000000000000060005273ffffffffffffffffffffffffffffffffffffffff9182166004521660245260446000fd5b610f59915060403d604011610f61575b610f51818361034a565b810190610dab565b905038610eb9565b503d610f47565b6108b9565b610fc560209173ffffffffffffffffffffffffffffffffffffffff936040519485809481937fbe04d3d6000000000000000000000000000000000000000000000000000000008352876004840152602483019061071f565b0392165afa908115610f6857600091610fdc575090565b90506020813d602011611003575b81610ff76020938361034a565b810103126100b2575190565b3d9150610fea56fea164736f6c634300081a000a";

    bytes32 internal constant PLUG_SALT =
        0x00000000000000000000000000000000000000007d87275a3bb77d0790d64dda;

    address internal constant PLUG_ADDRESS = 0x000000008114350aa81CaE0153A8615e2578F462;

    /**
     * @notice Deploy (if needed) and return the PlugFactory contract instance.
     * @return $plugFactory The PlugFactory contract instance.
     */
    function plugFactory() internal returns (PlugFactory $plugFactory) {
        require(
            keccak256(abi.encodePacked(type(PlugFactory).creationCode))
                == keccak256(abi.encodePacked(PLUG_FACTORY_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_FACTORY_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_FACTORY_SALT, PLUG_FACTORY_INITCODE);
            require(reality == PLUG_FACTORY_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plugFactory = PlugFactory(payable(PLUG_FACTORY_ADDRESS));
    }

    /**
     * @notice Deploy (if needed) and return the PlugRewards contract instance.
     * @return $plugRewards The PlugRewards contract instance.
     */
    function plugRewards() internal returns (PlugRewards $plugRewards) {
        require(
            keccak256(abi.encodePacked(type(PlugRewards).creationCode))
                == keccak256(abi.encodePacked(PLUG_REWARDS_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_REWARDS_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_REWARDS_SALT, PLUG_REWARDS_INITCODE);
            require(reality == PLUG_REWARDS_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plugRewards = PlugRewards(payable(PLUG_REWARDS_ADDRESS));
    }

    /**
     * @notice Deploy (if needed) and return the PlugSocket contract instance.
     * @return $plugSocket The PlugSocket contract instance.
     */
    function plugSocket() internal returns (PlugSocket $plugSocket) {
        require(
            keccak256(abi.encodePacked(type(PlugSocket).creationCode))
                == keccak256(abi.encodePacked(PLUG_SOCKET_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_SOCKET_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_SOCKET_SALT, PLUG_SOCKET_INITCODE);
            require(reality == PLUG_SOCKET_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plugSocket = PlugSocket(payable(PLUG_SOCKET_ADDRESS));
    }

    /**
     * @notice Deploy (if needed) and return the PlugTicket contract instance.
     * @return $plugTicket The PlugTicket contract instance.
     */
    function plugTicket() internal returns (PlugTicket $plugTicket) {
        require(
            keccak256(abi.encodePacked(type(PlugTicket).creationCode))
                == keccak256(abi.encodePacked(PLUG_TICKET_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_TICKET_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_TICKET_SALT, PLUG_TICKET_INITCODE);
            require(reality == PLUG_TICKET_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plugTicket = PlugTicket(payable(PLUG_TICKET_ADDRESS));
    }

    /**
     * @notice Deploy (if needed) and return the PlugToken contract instance.
     * @return $plugToken The PlugToken contract instance.
     */
    function plugToken() internal returns (PlugToken $plugToken) {
        require(
            keccak256(abi.encodePacked(type(PlugToken).creationCode))
                == keccak256(abi.encodePacked(PLUG_TOKEN_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_TOKEN_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_TOKEN_SALT, PLUG_TOKEN_INITCODE);
            require(reality == PLUG_TOKEN_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plugToken = PlugToken(payable(PLUG_TOKEN_ADDRESS));
    }

    /**
     * @notice Deploy (if needed) and return the Plug contract instance.
     * @return $plug The Plug contract instance.
     */
    function plug() internal returns (Plug $plug) {
        require(
            keccak256(abi.encodePacked(type(Plug).creationCode))
                == keccak256(abi.encodePacked(PLUG_INITCODE)),
            "PlugEtcherLib:invalid-initcode"
        );

        if (_extcodesize(PLUG_ADDRESS) == 0) {
            address reality = safeCreate2(PLUG_SALT, PLUG_INITCODE);
            require(reality == PLUG_ADDRESS, "PlugEtcherLib:unexpected-address");
        }

        $plug = Plug(payable(PLUG_ADDRESS));
    }

    /**
     * @notice Deploys a contract via 0age's immutable create 2 factory for testing.
     * @param $salt The salt to use for the deployment.
     * @param $initializationCode The initialization code for the contract.
     * @return $deployment The address of the deployed contract.
     */
    function safeCreate2(
        bytes32 $salt,
        bytes memory $initializationCode
    )
        public
        returns (address $deployment)
    {
        // Canonical address of 0age's immutable create 2 factory.
        address c2f = 0x0000000000FFe8B47B3e2130213B802212439497;
        if (_extcodesize(c2f) == 0) {
            bytes memory ic2fBytecode =
                hex"60806040526004361061003f5760003560e01c806308508b8f1461004457806364e030871461009857806385cf97ab14610138578063a49a7c90146101bc575b600080fd5b34801561005057600080fd5b506100846004803603602081101561006757600080fd5b503573ffffffffffffffffffffffffffffffffffffffff166101ec565b604080519115158252519081900360200190f35b61010f600480360360408110156100ae57600080fd5b813591908101906040810160208201356401000000008111156100d057600080fd5b8201836020820111156100e257600080fd5b8035906020019184600183028401116401000000008311171561010457600080fd5b509092509050610217565b6040805173ffffffffffffffffffffffffffffffffffffffff9092168252519081900360200190f35b34801561014457600080fd5b5061010f6004803603604081101561015b57600080fd5b8135919081019060408101602082013564010000000081111561017d57600080fd5b82018360208201111561018f57600080fd5b803590602001918460018302840111640100000000831117156101b157600080fd5b509092509050610592565b3480156101c857600080fd5b5061010f600480360360408110156101df57600080fd5b508035906020013561069e565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205460ff1690565b600083606081901c33148061024c57507fffffffffffffffffffffffffffffffffffffffff0000000000000000000000008116155b6102a1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260458152602001806107746045913960600191505060405180910390fd5b606084848080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920182905250604051855195965090943094508b93508692506020918201918291908401908083835b6020831061033557805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016102f8565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018019909216911617905260408051929094018281037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe00183528085528251928201929092207fff000000000000000000000000000000000000000000000000000000000000008383015260609890981b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016602183015260358201969096526055808201979097528251808203909701875260750182525084519484019490942073ffffffffffffffffffffffffffffffffffffffff81166000908152938490529390922054929350505060ff16156104a7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252603f815260200180610735603f913960400191505060405180910390fd5b81602001825188818334f5955050508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161461053a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260468152602001806107b96046913960600191505060405180910390fd5b50505073ffffffffffffffffffffffffffffffffffffffff8116600090815260208190526040902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790559392505050565b6000308484846040516020018083838082843760408051919093018181037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe001825280845281516020928301207fff000000000000000000000000000000000000000000000000000000000000008383015260609990991b7fffffffffffffffffffffffffffffffffffffffff000000000000000000000000166021820152603581019790975260558088019890985282518088039098018852607590960182525085519585019590952073ffffffffffffffffffffffffffffffffffffffff81166000908152948590529490932054939450505060ff909116159050610697575060005b9392505050565b604080517fff000000000000000000000000000000000000000000000000000000000000006020808301919091523060601b6021830152603582018590526055808301859052835180840390910181526075909201835281519181019190912073ffffffffffffffffffffffffffffffffffffffff81166000908152918290529190205460ff161561072e575060005b9291505056fe496e76616c696420636f6e7472616374206372656174696f6e202d20636f6e74726163742068617320616c7265616479206265656e206465706c6f7965642e496e76616c69642073616c74202d206669727374203230206279746573206f66207468652073616c74206d757374206d617463682063616c6c696e6720616464726573732e4661696c656420746f206465706c6f7920636f6e7472616374207573696e672070726f76696465642073616c7420616e6420696e697469616c697a6174696f6e20636f64652ea265627a7a723058202bdc55310d97c4088f18acf04253db593f0914059f0c781a9df3624dcef0d1cf64736f6c634300050a0032";
            /// @solidity memory-safe-assembly
            assembly {
                let m := mload(0x40)
                mstore(m, 0xb4d6c782) // `etch(address,bytes)`.
                mstore(add(m, 0x20), c2f)
                mstore(add(m, 0x40), 0x40)
                let n := mload(ic2fBytecode)
                mstore(add(m, 0x60), n)
                for { let i := 0 } lt(i, n) { i := add(0x20, i) } {
                    mstore(add(add(m, 0x80), i), mload(add(add(ic2fBytecode, 0x20), i)))
                }
                let vmAddress := 0x7109709ECfa91a80626fF3989D68f67F5b1DD12D
                if iszero(call(gas(), vmAddress, 0, add(m, 0x1c), add(n, 0x64), 0x00, 0x00)) {
                    revert(0, 0)
                }
            }
        }
        /// @solidity memory-safe-assembly
        assembly {
            let m := mload(0x40)
            let n := mload($initializationCode)
            mstore(m, 0x64e03087) // `safeCreate2(bytes32,bytes)`.
            mstore(add(m, 0x20), $salt)
            mstore(add(m, 0x40), 0x40)
            mstore(add(m, 0x60), n)
            // prettier-ignore
            for { let i := 0 } lt(i, n) { i := add(i, 0x20) } {
                mstore(add(add(m, 0x80), i), mload(add(add($initializationCode, 0x20), i)))
            }
            if iszero(call(gas(), c2f, 0, add(m, 0x1c), add(n, 0x64), m, 0x20)) {
                returndatacopy(m, m, returndatasize())
                revert(m, returndatasize())
            }
            $deployment := mload(m)
        }
    }

    /**
     * @notice Determine and retrieve the extcodesize of `deployment`.
     * @param $deployment The address to check.
     * @return $result The size of the code at `deployment`.
     */
    function _extcodesize(address $deployment) private view returns (uint256 $result) {
        /// @solidity memory-safe-assembly
        assembly {
            $result := extcodesize($deployment)
        }
    }
}
